<!DOCTYPE html>
<html>
<head>
    <title>Deep Link Redirect</title>
</head>
<body>
    <script type="text/javascript">
        // 在页面加载时获取当前页面的查询参数
        window.onload = function() {
            // 获取当前页面的 URL
            var currentUrl = new URL(window.location.href);
            // 使用 URLSearchParams 解析查询参数
            var params = new URLSearchParams(currentUrl.search);

            // 取得所有查询参数并输出到控制台
            params.forEach(function(value, key) {
                console.log(key + ': ' + value);
            });

            // 例如，获取特定的 animal_id 参数
            var animalId = params.get('animal_id');
            console.log("Animal ID:", animalId);

            // 尝试打开应用
            if (animalId) {
                window.location.href = "anl://gobusnow.github.io/animalRedirect?animal_id=" + animalId;
            } else {
                window.location.href = "anl://gobusnow.github.io/animalRedirect";
            }

            // 如果 2 秒后还没有跳转，重定向到 App Store
            setTimeout(function() {
                window.location.href = "https://apps.apple.com/tw/app/%E9%A0%98%E9%A4%8A%E4%B9%8B%E5%AE%B6/id6478952816"; // App Store 下载链接
            }, 2000); // 延迟 2 秒
        };
    </script>
    <p>跳轉中...</p>
</body>
</html>